{% extends "home.html" %}
{% block content %}
<style>
  .btn-box{
    display:flex;gap:12px;align-items:center;margin-top:18px
  }
  .btn-box button{
    padding:10px 14px;border-radius:10px;border:0;font-weight:600;cursor:pointer;display:inline-flex;align-items:center;gap:8px;background:#1a1a1a;color:#fff
  }
  .btn-box a{
    padding:10px 14px;border-radius:10px;border:1px solid #e6e9ee;color:inherit;text-decoration:none;display:inline-flex;align-items:center;gap:8px;margin-left:auto
  }
  @media (max-width: 768px) {
    .btn-box button,a{
      width: 100%;
    }

    .btn-box {
      align-items: center;
      flex-direction: column;
  }

  .btn-box button{
    padding:14px 14px;
  }
  }
</style>
<div style="padding:28px 12px; background:transparent">
  <main style="max-width:960px;margin:0 auto">
    <div style="margin:0 0 12px;font-size:20px">
      <h2 style="margin:0">Submit a Complaint</h2>
    </div>

    {% if messages %}
      {% for msg in messages %}
      <p class="flash-message {% if msg.tags == 'error' %}flash-error{% else %}flash-success{% endif %}">
        {{ msg }}
    </p>
      {% endfor %}
    {% endif %}

    <form method="post" enctype="multipart/form-data" style="background:#ffffff;border:1px solid #e6e9ee;border-radius:12px;padding:18px;box-shadow:0 6px 18px rgba(12,18,30,0.04);" novalidate>
      {% csrf_token %}

      <div style="display:flex;flex-direction:column;gap:12px">
        <div style="display:grid;grid-template-columns:1fr;gap:18px;align-items:start">

          <div>
            {% if student.room %}
              <p style="color:#6b7280;font-size:13px;margin:0"><strong>Room</strong> &nbsp;â€¢&nbsp; {{ student.room }}</p>
            {% else %}
              <label for="room" style="display:block;font-weight:600;margin-bottom:6px">Room</label>
              <input id="room" type="text" name="room" placeholder="e.g. A-102" style="width:100%;padding:12px;border-radius:10px;border:1px solid #e6e9ee;font-size:14px;background:transparent" />
            {% endif %}

            <div style="margin-top:12px">
              <label for="title" style="display:block;font-weight:600;margin-bottom:6px">Title<span style="color:#ef4444;font-weight:700;margin-left:4px"> *</span></label>
              <input id="title" type="text" name="title" required placeholder="Short, descriptive title" style="width:100%;padding:12px;border-radius:10px;border:1px solid #e6e9ee;font-size:14px;background:transparent" />
            </div>

            <div style="margin-top:12px">
              <label for="description" style="display:block;font-weight:600;margin-bottom:6px">Description<span style="color:#ef4444;font-weight:700;margin-left:4px"> *</span></label>
              <textarea id="description" name="description" rows="5" required placeholder="Describe the issue with as many details as needed" style="width:100%;padding:12px;border-radius:10px;border:1px solid #e6e9ee;font-size:14px;min-height:120px;resize:vertical"></textarea>
            </div>

            <div style="margin-top:12px">
              <label for="complaint_type" style="display:block;font-weight:600;margin-bottom:6px">Complaint Type</label>
              <select id="complaint_type" name="complaint_type" aria-label="Complaint type" style="width:100%;padding:12px;border-radius:10px;border:1px solid #e6e9ee;font-size:14px;background:transparent">
                <option value="room">Room</option>
                <option value="maintenance">Maintenance</option>
                <option value="billing">Billing</option>
                <option value="mess">Mess / Food</option>
                <option value="other">Other</option>
              </select>
            </div>
          </div>

          <div>
            <div style="display:flex;flex-direction:column">
              <label for="attachment" style="display:block;font-weight:600;margin-bottom:6px">Attachment</label>

              <label for="attachment" style="display:inline-flex;align-items:center;gap:10px;padding:10px 12px;border-radius:10px;border:1px dashed #e6e9ee;cursor:pointer">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true"><path d="M12 3v9" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"/><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"/></svg>
                <span>Choose a file</span>
                <input id="attachment" type="file" name="attachment" style="display:none">
              </label>

              <p style="color:#6b7280;font-size:13px;margin-top:8px">Attach photos or documents (optional). Max file size enforced by server.</p>
              
              <div class="btn-box">
                <button type="submit">Submit Complaint</button>
                <a href="{% url 's_home' %}" >Cancel</a>
                <a href="{% url 'student_complaints_list' %}" >View Your Complaints</a>
              </div>
            </div>
          </div>

        </div>
      </div>
    </form>

  </main>
</div>
{% endblock %}